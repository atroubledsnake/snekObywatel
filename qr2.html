<head>
    <title>mObywatel</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="assets/card.css?v=1.2">
    <link rel="stylesheet" href="assets/main.css">
    <link rel="icon" type="image/x-icon" href="images/otM5jOA.png">
    <link rel="apple-touch-icon" href="images/otM5jOA.png">
    <link rel="shortcut icon" href="images/otM5jOA.png">
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, initial-scale=0.8, user-scalable=no">
     <script src="https://unpkg.com/html5-qrcode"></script>
    <meta name="mobile-web-app-capable" content="yes">
    <style>
        .circle-buttons {
      display: flex;
      justify-content: space-around;
      margin-top: 24px;
    }
    .circle-button {
      background-color: #2c2c2c;
      border-radius: 50%;
      width: 72px;
      height: 72px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 12px;
      text-align: center;
      border: 1px solid #444;
    }
    .circle-button span {
      margin-top: 6px;
    }

.box_value, .box_value1{
    font-size: 1rem;
    font-weight: 500;
    color: #1f2125;
    margin: 0;
    padding: 0;

}

.confirm_box{
    margin-bottom: 20px;
    margin-top: 20px;
}

.other_grid{
    padding-top: auto;
}


    </style>
</head>
<body>
    <div class="top_grid">
        <div class="action_grid" style="width: 25%;">
            <img src="images/BDZT6fX.png" class="back_img">
            <p onclick="sendTo('card')" class="back_text" style="margin-left: 7px;">mDowód</p>
        </div>
        <p class="title_text" style="text-align: center;">Zeskanuj kod QR</p>
    </div>

    <div class="bottom_bar">
        <div class="bottom_bar_grid">
            <div class="bottom_element_grid" send="home">
                <div class="bottom_element_image home_open"></div>
                <p class="bottom_element_text">Pulpit</p>
            </div>
            <div class="bottom_element_grid" send="documents">
                <div class="bottom_element_image documents"></div>
                <p class="bottom_element_text open">Dokumenty</p>
            </div>
            <div class="bottom_element_grid" send="services">
                <div class="bottom_element_image services"></div>
                <p class="bottom_element_text">Usługi</p>
            </div>
            <div class="bottom_element_grid" send="qr">
                <div class="bottom_element_image qr"></div>
                <p class="bottom_element_text">Kod QR</p>
            </div>
            <div class="bottom_element_grid" send="more">
                <div class="bottom_element_image more"></div>
                <p class="bottom_element_text">Więcej</p>
            </div>
        </div>
    </div>


    <div id="qr-reader"></div>

    <button class="code-button">Wpisz kod</button>
    <script>
    const onScanSuccess = (decodedText) => {
      alert("✅ Zeskanowano: " + decodedText);
      html5QrCode.stop().then(() => {
        console.log("Skanowanie zatrzymane.");
      }).catch(err => console.error("Błąd zatrzymania:", err));
    };

    const onScanError = (errorMessage) => {
      // Możesz pominąć logowanie, jeśli irytuje.
      console.warn("❌ Błąd skanowania:", errorMessage);
    };

    const html5QrCode = new Html5Qrcode("qr-reader");

    Html5Qrcode.getCameras().then(devices => {
      // Lepiej: użyj trybu 'environment', by wymusić tylną kamerę
      html5QrCode.start(
        { facingMode: "environment" },
        {
          fps: 10,
          qrbox: { width: 250, height: 250 }
        },
        onScanSuccess,
        onScanError
      );
    }).catch(err => {
      console.error("🚫 Nie można uzyskać dostępu do kamery:", err);
      alert("Nie udało się uruchomić kamery.");
    });

    function manualEntry() {
      const code = prompt("Wpisz kod ręcznie:");
      if (code) {
        alert("Wprowadzony kod: " + code);
      }
    }
  </script>
    <script src="assets/bar.js"></script>
    <script src="assets/manifest.js"></script>        
    
</body>
